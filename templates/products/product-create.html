{% extends '_base-dashboard.html' %}

{% block title %}Add product{% endblock title%}
{% block content %}

<div class="tab-group mb-36">
  <select id="tab-select" class="sm:hidden py-3 px-4 pe-9 block w-full border-gray-200 rounded-lg text-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-slate-900 dark:border-gray-700 dark:text-gray-400" aria-label="Tabs" role="tablist">
    <option value="#hs-tab-to-select-1">Details</option>
    <option value="#hs-tab-to-select-2">Images</option>
    <option value="#hs-tab-to-select-3">Variations</option>
  </select>

  <div class="hidden sm:block border-b border-gray-200 dark:border-gray-700">
    <nav class="flex space-x-2" aria-label="Tabs" role="tablist" hs-data-tab-select="#tab-select">
      <button type="button" class="hs-tab-active:bg-white hs-tab-active:border-b-transparent hs-tab-active:text-blue-600 dark:hs-tab-active:bg-gray-800 dark:hs-tab-active:border-b-gray-800 dark:hs-tab-active:text-white -mb-px py-3 px-4 inline-flex items-center gap-2 bg-gray-50 text-sm font-medium text-center border text-gray-500 rounded-t-lg hover:text-gray-700 disabled:opacity-50 disabled:pointer-events-none dark:bg-gray-700 dark:border-gray-700 dark:text-gray-400 dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600 active" id="hs-tab-to-select-item-1" data-hs-tab="#hs-tab-to-select-1" aria-controls="hs-tab-to-select-1" role="tab">
        Details
      </button>
      <button type="button" class="hs-tab-active:bg-white hs-tab-active:border-b-transparent hs-tab-active:text-blue-600 dark:hs-tab-active:bg-gray-800 dark:hs-tab-active:border-b-gray-800 dark:hs-tab-active:text-white -mb-px py-3 px-4 inline-flex items-center gap-2 bg-gray-50 text-sm font-medium text-center border text-gray-500 rounded-t-lg hover:text-gray-700 disabled:opacity-50 disabled:pointer-events-none dark:bg-gray-700 dark:border-gray-700 dark:text-gray-400 dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600" id="hs-tab-to-select-item-2" data-hs-tab="#hs-tab-to-select-2" aria-controls="hs-tab-to-select-2" role="tab">
        Images
      </button>
      <button type="button" class="hs-tab-active:bg-white hs-tab-active:border-b-transparent hs-tab-active:text-blue-600 dark:hs-tab-active:bg-gray-800 dark:hs-tab-active:border-b-gray-800 dark:hs-tab-active:text-white -mb-px py-3 px-4 inline-flex items-center gap-2 bg-gray-50 text-sm font-medium text-center border text-gray-500 rounded-t-lg hover:text-gray-700 disabled:opacity-50 disabled:pointer-events-none dark:bg-gray-700 dark:border-gray-700 dark:text-gray-400 dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600" id="hs-tab-to-select-item-3" data-hs-tab="#hs-tab-to-select-3" aria-controls="hs-tab-to-select-3" role="tab">
        Variations
      </button>
    </nav>
  </div>

  <div class="mt-6">

    <div id="hs-tab-to-select-1" role="tabpanel" aria-labelledby="hs-tab-to-select-item-1">
      <div class="p-3 sm:p-0">

        <form id="product-form" method="post" class="grid grid-cols-1 gap-6">
          {% csrf_token %}
          {{ form.as_p }}
          <button type="submit">Create product</button>
        </form>

      </div>
    </div>
    
    <div id="hs-tab-to-select-2" class="hidden" role="tabpanel" aria-labelledby="hs-tab-to-select-item-2">
      <div class="p-3 sm:p-0">
        <div id="image-formset" class="grid grid-cols-3 sm:grid-cols-6 gap-5">
          {% for image in product.images.all %}
            <div class="product-image">
              <img src="{{ image.image.url }}" alt="{{ image.alt_text }}" class="w-full">
              <p>{{ image.alt_text }}</p>
              <button class="delete-image" hx-post="{% url 'delete_product_image' %}" hx-vals='{"image_id": "{{ image.id }}"}' hx-target="closest .product-image" hx-swap="outerHTML" hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}'>Delete</button>
            </div>
          {% endfor %}
          <form hx-post="{% url 'upload_product_image' product.slug %}" hx-target="#product-images" enctype="multipart/form-data">
            {% csrf_token %}
            <input type="hidden" name="product_id" value="{{ product.id }}">
            <input type="file" name="image" required>
            <input type="text" name="alt_text" placeholder="Alt Text">
            <button type="submit">Add Image</button>
          </form>
        </div>
      </div>
    </div>

    <div id="hs-tab-to-select-3" class="hidden" role="tabpanel" aria-labelledby="hs-tab-to-select-item-3">
      <div class="p-3 sm:p-0">
        


        
      </div>
    </div>

</div>

<div class="fixed bottom-0 right-0">
  <div class="mb-6 mr-6">
    <button type="submit" form="product-form" class="button-primary z-[100]">Create Product</button>
  </div>

  </div>
  {% endblock content %}

